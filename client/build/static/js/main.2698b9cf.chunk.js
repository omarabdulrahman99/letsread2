(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,a){e.exports=a.p+"static/media/greencheck.789bfbef.jpg"},212:function(e,t,a){e.exports=a(535)},217:function(e,t,a){},225:function(e,t,a){},535:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"fetchUser",function(){return y}),a.d(n,"callbacklul",function(){return j}),a.d(n,"notebookid",function(){return O}),a.d(n,"calendarbookid",function(){return w});a(213),a(215),a(217);var r=a(1),s=a.n(r),l=a(37),o=a.n(l),c=a(26),i=a(14),d=a(15),u=a(17),h=a(16),m=a(18),p=a(42),b=a.n(p),f=(a(125),a(225),a(5)),v=a.n(f),g=a(12),k=a(9),E=a.n(k),y=function(){return function(){var e=Object(g.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/current_user");case 2:a=e.sent,t({type:"fetch_user",payload:a.data});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},j=function(e){return function(){var e=Object(g.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/auth/goodreads/callback");case 2:a=e.sent,t({type:"callbacklul",payload:a.data});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(g.a)(v.a.mark(function t(a){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"notebookid",payload:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(g.a)(v.a.mark(function t(a){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"calbookid",payload:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},S=a(19),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleKeyDown=function(e){37===e.keyCode&&b()(a.el).turn("previous"),39===e.keyCode&&b()(a.el).turn("next")},a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.el&&b()(this.el).turn(Object.assign({},this.props.options)),document.addEventListener("keydown",this.handleKeyDown,!1)}},{key:"componentWillUnmount",value:function(){this.el&&b()(this.el).turn("destroy").remove(),document.removeEventListener("keydown",this.handleKeyDown,!1)}},{key:"render",value:function(){var e=this,t=(this.props.coverinfo.chapnum,this.props.coverinfo.title,this.props.profile[0].name[0]);return s.a.createElement("div",{className:this.props.className,ref:function(t){return e.el=t}},s.a.createElement("div",{className:"hard"},s.a.createElement("div",{className:"noteCover"},s.a.createElement("div",{className:"cardTitle"},"Your notes for Chapter "+this.props.coverinfo.chapnum),s.a.createElement("hr",null),s.a.createElement("div",{className:"cardTitle2"},this.props.coverinfo.title))),s.a.createElement("div",{className:"hard"}),this.props.turnjstext.map(function(e,t){return s.a.createElement("div",{key:t,className:"page"},s.a.createElement("div",{className:"turnjsPageNum"},t+1),s.a.createElement("hr",null),s.a.createElement("div",{className:"pageText"},e))}),s.a.createElement("div",{className:"hard"},s.a.createElement("div",{className:"cardTitle"},"Credits to YOU =) "+t)),s.a.createElement("div",{className:"hard"},s.a.createElement("div",{className:"cardTitle"},"End Cover")))}}]),t}(s.a.Component);C.defaultProps=Object(c.a)({style:{},className:"book",options:{},pages:["https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/01.jpg","https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/02.jpg","https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/03.jpg","https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/04.jpg","https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/05.jpg","https://raw.github.com/blasten/turn.js/master/demos/magazine/pages/06.jpg"]},"options",{width:800,height:600,autoCenter:!0,display:"double",acceleration:!0,elevation:50,gradients:!b.a.isTouch,when:{turned:function(e,t){}}});var N=Object(S.b)(function(e){return{thisuser:e.auth}},n)(C),x=a(48),T=a(207),D=Object(x.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_user":case"callbacklul":return console.log(t.payload),t.payload||!1;default:return e}},bknid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"notebookid":case"calbookid":return t.payload||!1;default:return e}}}),I=a(40),_=a(120),M=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"footer"},s.a.createElement("ul",{className:"ftlinks"},s.a.createElement("li",null,"Copyright \xa92018-2019 LetsRead.com ")))}}]),t}(r.Component),R=a(7),q=a(6),B=a(38),L=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-spinner fa-spin"})," Loading...")}}]),t}(r.Component),Y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={activeshelf:{},loading:!1},a.activeshelves2={},a.prevCounter=0,a.othershelves2=[],a.shelftitle="",a.renderItems=a.renderItems.bind(Object(R.a)(Object(R.a)(a))),a.renderToggle=a.renderToggle.bind(Object(R.a)(Object(R.a)(a))),a.onCheckChange=a.onCheckChange.bind(Object(R.a)(Object(R.a)(a))),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.prevCounter=this.props.searchcounter,this.renderToggle(),this.renderItems(),this.setState({activeshelf:this.activeshelves2})}},{key:"onCheckChange",value:function(e,t,a,n){var r=this,s=e.target.checked,l="";this.activeshelves2[t]=s,this.setState(function(e){return{activeshelf:Object(B.a)({},e.activeshelf,Object(c.a)({},t,r.activeshelves2[t])),loading:!0}},Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("http://localhost:7000/api/addtoshelf",{name:n,book_id:a,a:s?"":"remove"});case 2:l=e.sent,console.log(l+" shelfadd"),r.setState({loading:!1});case 5:case"end":return e.stop()}},e)})))}},{key:"renderToggle",value:function(){var e=this,t=this.props.bookobj.best_book[0].id[0]._,a=this.props.usershelfbooks,n=[],r=[];if(this.othershelves2=[],this.shelftitle=void 0,a){console.log(a),n=a.map(function(n,l){if(a[l].book[0].id[0]._===t){for(var o=0;o<a[l].shelves[0].shelf.length;o++)"true"==a[l].shelves[0].shelf[o].$.exclusive?(e.shelftitle=a[l].shelves[0].shelf[o].$.name,r.push(s.a.createElement(q.e,{key:t,caret:!0,color:"red"},"\u2713 ",e.shelftitle))):"false"==a[l].shelves[0].shelf[o].$.exclusive&&e.othershelves2.push(a[l].shelves[0].shelf[o].$.name);return r}}),0==this.othershelves2.length&&(this.othershelves2=void 0);var l=n.filter(function(e){return e});return void 0===l||0==l.length?s.a.createElement(q.e,{caret:!0,color:"warning"},"Want to read ?"):l}return s.a.createElement(q.e,{caret:!0,color:"warning"},"Want to read ?")}},{key:"renderItems",value:function(){var e=this,t=[],a=this.props.bookobj.best_book[0].id[0]._,n=this.props.shelflist;n?t=n.data.GoodreadsResponse.shelves[0].user_shelf.map(function(t){if("true"!=t.exclusive_flag[0]._){if(e.othershelves2){for(var n=void 0,r=void 0,l=0;l<e.othershelves2.length;l++)t.name[0]==e.othershelves2[l]?(e.activeshelves2[t.id[0]._]=!0,n=s.a.createElement("div",{key:t.id[0]._,className:"checkboxinput"},s.a.createElement("label",{key:t.id[0]._},e.state.loading?s.a.createElement(L,null):"",s.a.createElement("input",{key:t.id[0]._,onChange:function(n){return e.onCheckChange(n,t.id[0]._,a,t.name[0])},type:"checkbox",value:t.name[0],checked:e.state.activeshelf[t.id[0]._]}),t.name[0]),s.a.createElement("br",null))):(e.activeshelves2[t.id[0]._]=!1,r=s.a.createElement("div",{key:t.id[0]._,className:"checkboxinput"},s.a.createElement("label",{key:t.id[0]._},e.state.loading?s.a.createElement(L,null):"",s.a.createElement("input",{key:t.id[0]._,onChange:function(n){return e.onCheckChange(n,t.id[0]._,a,t.name[0])},type:"checkbox",value:t.name[0],checked:e.state.activeshelf[t.id[0]._]}),t.name[0]),s.a.createElement("br",null)));return n||r}return e.activeshelves2[t.id[0]._]=!1,s.a.createElement("div",{key:t.id[0]._,className:"checkboxinput"},s.a.createElement("label",{key:t.id[0]._},e.state.loading?s.a.createElement(L,null):"",s.a.createElement("input",{key:t.id[0]._,onChange:function(n){return e.onCheckChange(n,t.id[0]._,a,t.name[0])},type:"checkbox",value:t.name[0],checked:e.state.activeshelf[t.id[0]._]}),t.name[0]),s.a.createElement("br",null))}return e.shelftitle?e.shelftitle!=t.name[0]?s.a.createElement(q.c,{key:t.id[0]._},t.name[0]):void 0:s.a.createElement(q.c,{key:t.id[0]._},t.name[0])}):(t.push(s.a.createElement(q.c,{key:1},"read")),t.push(s.a.createElement(q.c,{key:2},"currently-reading")),t.push(s.a.createElement(q.c,{key:3},"to-read")));return this.prevCounter!=this.props.searchcounter&&(console.log(this.prevCounter+"uhmm"+this.props.searchcounter+"should change"),this.prevCounter=this.props.searchcounter,this.setState(function(t){return Object(B.a)({},t,{activeshelf:e.activeshelves2})},function(){return console.log("completed ding!")})),t}},{key:"render",value:function(){return s.a.createElement("div",{className:"button"},s.a.createElement(q.b,null,this.renderToggle(),s.a.createElement(q.d,null,this.renderItems())))}}]),t}(r.Component);var A=Object(S.b)(function(e){return{thisuser:e.auth}})(Y),z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).searchRef=s.a.createRef(),a.state={searchquery:"",trows:a.props.tdata.rows,tcolumns:a.props.tdata.columns,tbooksarray:a.props.tdata.booksarray,usershelfbooksraw:a.props.usershelfbooksraw,shelflist:a.props.shelflist,searchcounter:0},a.handleInputChanges=a.handleInputChanges.bind(Object(R.a)(Object(R.a)(a))),a.handleSubmits=a.handleSubmits.bind(Object(R.a)(Object(R.a)(a))),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e="",t=this.state.usershelfbooksraw;e=t?this.state.usershelfbooksraw.data.usershelfbooks:this.state.usershelfbooksraw;var a=this.state.tbooksarray,n=this.state.trows,r=this.state.shelflist,l=this.state.searchcounter;n.forEach(function(t,n,o){o[n].button=s.a.createElement(A,{usershelfbooks:e,shelflist:r,bookobj:a[n],searchcounter:l})}),this.setState({trows:n})}},{key:"handleSubmits",value:function(){var e=Object(g.a)(v.a.mark(function e(t){var a,n,r,l,o,c,i,d,u,h,m;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=t.currentTarget,n=t.currentTarget,r="",l="",o="",c="",!this.props.thisuser){e.next=17;break}return e.next=10,E.a.post("http://localhost:7000/api/shelf/list",{user:this.props.thisuser});case 10:return c=e.sent,e.next=13,E.a.post("http://localhost:7000/api/usershelfbooks",{goodreadId:this.props.thisuser.goodreadId});case 13:o=e.sent,l=o.data.usershelfbooks,e.next=20;break;case 17:c=!1,o=!1,l=!1;case 20:if("DIV"!=n.nodeName){e.next=32;break}return i=a.parentNode,d=i.elements.searchq.value,e.next=25,E.a.get("http://localhost:7000/api/search/".concat(d));case 25:r=e.sent,u=this.state.searchcounter,h=r.data.booksarray,r.data.rows.forEach(function(e,t,a){a[t].button=s.a.createElement(A,{shelflist:c,usershelfbooks:l,bookobj:h[t],searchcounter:u})}),this.setState(function(e){return{trows:r.data.rows,tcolumns:r.data.columns,tbooksarray:r.data.booksarray,searchcounter:e.searchcounter+1}}),e.next=41;break;case 32:return m=a.elements.searchq.value,e.next=36,E.a.get("http://localhost:7000/api/search/".concat(m));case 36:r=e.sent,u=this.state.searchcounter,h=r.data.booksarray,r.data.rows.forEach(function(e,t,a){a[t].button=s.a.createElement(A,{shelflist:c,usershelfbooks:l,bookobj:h[t],searchcounter:u})}),this.setState(function(e){return{trows:r.data.rows,tcolumns:r.data.columns,tbooksarray:r.data.booksarray,searchcounter:e.searchcounter+1}});case 41:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleInputChanges",value:function(e){this.setState({searchquery:e.target.value})}},{key:"render",value:function(){var e={columns:this.state.tcolumns,rows:this.state.trows};return s.a.createElement("div",null,s.a.createElement("div",{className:"topsearch"},s.a.createElement("form",{onSubmit:this.handleSubmits,className:"form-inline active-pink-3 active-pink-4 "},s.a.createElement("div",{onClick:this.handleSubmits},s.a.createElement("i",{onClick:this.onClicki,className:"fa fa-search","aria-hidden":"true"})),s.a.createElement("input",{className:"form-control form-control-sm ml-3 w-75",ref:this.searchRef,required:!0,type:"text",name:"searchq",value:this.state.searchquery,onChange:this.handleInputChanges,placeholder:"Search books by title, isbn, or author!","aria-label":"Search"}))),s.a.createElement("div",null,s.a.createElement(q.f,{striped:!0,bordered:!0,fixed:!0,hover:!0,small:!0,paging:!1,data:e})))}}]),t}(r.Component);var U=Object(S.b)(function(e){return{thisuser:e.auth}})(z),G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={searchquery:"",qresults:"",usershelfbooksraw:"",shelflist:"",searchpage:!1},a.handleInputChange=a.handleInputChange.bind(Object(R.a)(Object(R.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(R.a)(Object(R.a)(a))),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target.value;this.setState({searchquery:t})}},{key:"handleSubmit",value:function(){var e=Object(g.a)(v.a.mark(function e(t){var a,n,r,s,l,o,c,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=t.currentTarget,n="",r="",s="",l=t.currentTarget,!this.props.thisuser){e.next=15;break}return e.next=9,E.a.post("http://localhost:7000/api/shelf/list",{user:this.props.thisuser});case 9:return r=e.sent,e.next=12,E.a.post("http://localhost:7000/api/usershelfbooks",{goodreadId:this.props.thisuser.goodreadId});case 12:s=e.sent,e.next=17;break;case 15:r=!1,s=!1;case 17:if("DIV"!=l.nodeName){e.next=26;break}return o=a.parentNode,c=o.elements.searchq.value,e.next=22,E.a.get("http://localhost:7000/api/search/".concat(c));case 22:n=e.sent,this.setState({qresults:n.data,shelflist:r,usershelfbooksraw:s,searchpage:!0}),e.next=32;break;case 26:return i=a.elements.searchq.value,e.next=30,E.a.get("http://localhost:7000/api/search/".concat(i));case 30:n=e.sent,this.setState({qresults:n.data,shelflist:r,usershelfbooksraw:s,searchpage:!0});case 32:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"renderContent",value:function(){return 1!=this.state.searchpage?s.a.createElement("div",{className:"formcenter"},s.a.createElement("p",{className:"landtitlep"},"Let's Read "),s.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-inline active-pink-3 active-pink-4 "},s.a.createElement("div",{onClick:this.handleSubmit},s.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"})),s.a.createElement("input",{className:"form-control form-control-sm ml-3 w-75",required:!0,type:"text",name:"searchq",value:this.state.searchquery,onChange:this.handleInputChange,placeholder:"Search books by title, isbn, or author!","aria-label":"Search"}))):s.a.createElement(U,{tdata:this.state.qresults,shelflist:this.state.shelflist,usershelfbooksraw:this.state.usershelfbooksraw})}},{key:"render",value:function(){return s.a.createElement("div",{className:"centeredsearch"},this.renderContent())}}]),t}(r.Component);var K=Object(S.b)(function(e){return{thisuser:e.auth}})(G),F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={dataloaded:"notloaded"},a.profileload=a.profileload.bind(Object(R.a)(Object(R.a)(a))),a.profilerender=a.profilerender.bind(Object(R.a)(Object(R.a)(a))),a.toggle=a.toggle.bind(Object(R.a)(Object(R.a)(a))),a.profileres="",a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"toggle",value:function(e){var t=this;console.log("toggle1");var a="modal"+e;this.setState(Object(c.a)({},a,!this.state[a]),function(){return console.log(t.state.modal1)})}},{key:"profileload",value:function(){var e=Object(g.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.goodreadId){e.next=4;break}return e.abrupt("return",s.a.createElement("div",null,"nodata"));case 4:if("loaded"!=this.state.dataloaded){e.next=7;break}e.next=13;break;case 7:return e.next=9,E.a.post("/api/profileinfo",{goodreadId:t.goodreadId});case 9:a=e.sent,a.data.profileinfo.GoodreadsResponse.user,this.profileres=a,this.setState(function(e){return{dataloaded:"notloaded"!=e.dataloaded?null:"loaded"}});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"profilerender",value:function(){var e=this.profileres.data.profileinfo.GoodreadsResponse.user,t=e[0].name[0],a=e[0].gender[0],n=e[0].location[0],r=e[0].age[0],l=e[0].about[0],o=e[0].image_url[0],c=(this.profileres.data.favbooks.GoodreadsResponse.reviews[0].review,{backgroundImage:"url(".concat(o,")")});return s.a.createElement("div",{className:"profiledetail"},s.a.createElement("div",{className:"profileimage",style:c}),s.a.createElement("div",{className:"profileinfo"},s.a.createElement("h1",{className:"profilename"},t),s.a.createElement("div",{className:"profilelabels"},s.a.createElement("div",null,"Location: "),s.a.createElement("div",null,"Gender:"),s.a.createElement("div",null,"Age:"),s.a.createElement("div",null,"About me:")),s.a.createElement("div",{className:"profiledata"},s.a.createElement("div",null,n),s.a.createElement("div",null,""!=a?a:"n/a"),s.a.createElement("div",null,""!=r?r:"n/a"),s.a.createElement("br",null),s.a.createElement("div",{className:"quotation"},l))))}},{key:"galleryrender",value:function(){for(var e=this,t=[],a=this.profileres.data.favbooks.GoodreadsResponse.reviews[0].review,n=0;n<9;n++)a[n]?t.push(s.a.createElement("figure",{key:n,onClick:function(){return e.toggle(1)}},s.a.createElement("img",{src:a[n].book[0].image_url[0],alt:""}))):t.push(s.a.createElement("figure",{key:n},s.a.createElement("img",{src:"https://i.imgur.com/RmQGVhT.png",alt:""})));return s.a.createElement("div",{className:"gallery1"},s.a.createElement("div",{className:"container2"},s.a.createElement("div",{id:"carousel"},t)))}},{key:"render",value:function(){return this.profileload(this.props.thisuser),s.a.createElement("div",{className:"profilecontainer"},"notloaded"!=this.state.dataloaded?this.profilerender():s.a.createElement("div",{className:"loader"}),"notloaded"!=this.state.dataloaded?this.galleryrender():s.a.createElement("div",null),s.a.createElement("div",{className:"favbookscontainer"},s.a.createElement("div",{className:"favbookstitle"},"Favorite books"),s.a.createElement("div",{className:"favbooksicon"},s.a.createElement("img",{src:"https://i.imgur.com/600kya8.jpg"}))))}}]),t}(r.Component);var H=Object(S.b)(function(e){return{thisuser:e.auth}},O)(F),W=a(8),J=a.n(W),P=a(70),$=a.n(P),V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).addSched=function(){var e=Object(g.a)(v.a.mark(function e(t){var n,r,s,l,o,c,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state.startdate,r=a.state.enddate,null==n||null==r){e.next=22;break}if(!(n<r)){e.next=19;break}if(s=a.state.saveddates,l=!0,null!=s)for(o=0;o<s.length;o++)(n>=J.a.parse(s[o].startdate)&&n<=J.a.parse(s[o].enddate)||r>=J.a.parse(s[o].startdate)&&r<=J.a.parse(s[o].enddate))&&(l=!1),(J.a.parse(s[o].startdate)>=n&&J.a.parse(s[o].startdate)<=r||J.a.parse(s[o].enddate)>=n&&J.a.parse(s[o].enddate)<=r)&&(l=!1);if(0!=l){e.next=11;break}a.setState({warning1:!1,warning2:!1,warning3:!0}),e.next=17;break;case 11:return a.setState({warning1:!1,warning2:!1,warning3:!1}),c={startdate:n.toString(),enddate:r.toString(),titlenum:a.state.titlenum},e.next=15,E.a.post("/api/booksched",{user:a.state.user,bookid:a.state.bookid,action:"save",datesched:c});case 15:i=e.sent,a.setState({saveddates:i.data.dates.datesched,titlenum:i.data.dates.datesched[i.data.dates.datesched.length-1].titlenum+1});case 17:e.next=20;break;case 19:a.setState({warning2:!0,warning1:!1,warning3:!1});case 20:e.next=23;break;case 22:a.setState({warning1:!0,warning2:!1,warning3:!1});case 23:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.editSched=function(){var e=Object(g.a)(v.a.mark(function e(t){var n,r,s,l,o,c,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state.startdate,r=a.state.enddate,null==n||null==r){e.next=25;break}if(!(n<r)){e.next=22;break}for(o in s=Object(B.a)({},a.state.saveddates),l=!0,s)s[o].titlenum==a.editnum&&(console.log(s[o]),delete s[o]);for(o in s)(n>=J.a.parse(s[o].startdate)&&n<=J.a.parse(s[o].enddate)||r>=J.a.parse(s[o].startdate)&&r<=J.a.parse(s[o].enddate))&&(console.log("false"),l=!1),(J.a.parse(s[o].startdate)>=n&&J.a.parse(s[o].startdate)<=r||J.a.parse(s[o].enddate)>=n&&J.a.parse(s[o].enddate)<=r)&&(console.log("false"),l=!1);if(0!=l){e.next=13;break}console.log(a.state.saveddates),a.setState({warning1:!1,warning2:!1,warning3:!0}),e.next=20;break;case 13:return console.log(a.state.saveddates),a.setState({warning1:!1,warning2:!1,warning3:!1}),c={startdate:n.toString(),enddate:r.toString(),titlenum:a.editnum},e.next=18,E.a.post("/api/booksched",{user:a.state.user,bookid:a.state.bookid,action:"edit",datesched:c});case 18:i=e.sent,a.setState({saveddates:i.data.datesched},function(){console.log(a.state.saveddates+"FUCKINGHELLO")});case 20:e.next=23;break;case 22:a.setState({warning2:!0,warning1:!1,warning3:!1});case 23:e.next=26;break;case 25:a.setState({warning1:!0,warning2:!1,warning3:!1});case 26:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.deleteSched=Object(g.a)(v.a.mark(function e(){var t,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("casket"),t=a.editnum,e.next=4,E.a.post("/api/booksched",{user:a.state.user,bookid:a.state.bookid,titlenum:t,action:"delete",startdate:a.state.startdate,enddate:a.state.enddate});case 4:n=e.sent,console.log(t),console.log(n.data),a.setState({saveddates:n.data.book.datesched},function(){console.log("deleted")}),a.togglemodale();case 9:case"end":return e.stop()}},e)})),a.schedinput=function(e,t){"startdate"==t?a.setState(function(t){return{startdate:e,calchange:!0}}):a.setState(function(t){return{enddate:e,calchange:!0}})},a.togglemodalc=function(){console.log(a.state.startdate),console.log(a.state.selectedDate),"open"===a.togglee?(console.log(a.state.createmodal),a.togglee=!1,a.setState({createmodal:!1,warning1:!1,warning2:!1,warning3:!1,calchange:!1,startdate:a.togsd,enddate:a.toged})):a.setState({createmodal:!a.state.createmodal,warning1:!1,warning2:!1,warning3:!1,calchange:!1,startdate:a.state.selectedDate,enddate:a.state.selectedDate})},a.togglemodale=function(e){if(e){var t=e.currentTarget.id;console.log(e.currentTarget),a.editnum=t;var n,r,s=a.state.saveddates,l=!1,o=!0,c=!1,i=void 0;try{for(var d,u=s[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var h=d.value;h.titlenum==t&&(a.togsd=J.a.parse(h.startdate),a.toged=J.a.parse(h.enddate),n=h.startdate,r=h.enddate,l=!0)}}catch(m){c=!0,i=m}finally{try{o||null==u.return||u.return()}finally{if(c)throw i}}l?(console.log(n,r,a.togsd),a.setState({startdate:n,enddate:r},function(){a.togglee="open",a.setState({editmodal:!a.state.editmodal},function(){console.log("toggleopen2")})})):a.setState({editmodal:!a.state.editmodal})}else a.setState({editmodal:!a.state.editmodal})},a.onDateClick=function(e){a.setState({selectedDate:e},function(){return a.togglemodalc()})},a.nextMonth=function(){a.setState({currentMonth:J.a.addMonths(a.state.currentMonth,1)})},a.prevMonth=function(){a.setState({currentMonth:J.a.subMonths(a.state.currentMonth,1)})},a.rtogsd=function(){var e=a.togsd,t="";return null!=e&&(t=(t=J.a.format(e,"ddd MMM DD, YYYY hh:mm A")).toString()),s.a.createElement("div",{className:"editdates"},t)},a.rtoged=function(){var e=a.toged,t="";return null!=e&&(t=(t=J.a.format(e,"ddd MMM DD, YYYY hh:mm A")).toString()),s.a.createElement("div",{className:"editdates"},t)},a.state={currentMonth:new Date,selectedDate:new Date,booksched:a.props.booksched,bookid:a.props.bookid,user:a.props.user,createmodal:!1,editmodal:!1,warning1:!1,warning2:!1,warning3:!1,startdate:null,enddate:null,calchange:!1,saveddates:null,titlenum:1},a.togglee=!1,a.togsd=null,a.toged=null,a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/booksched",{user:this.state.user,bookid:this.state.bookid,action:"get"});case 2:(t=e.sent).data.dates&&(console.log(t.data.dates),(a=t.data.dates.datesched)&&a.length>0&&this.setState({saveddates:a,titlenum:a[a.length-1].titlenum+1}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderHeader",value:function(){return s.a.createElement("div",{className:"header row flex-middle"},s.a.createElement("div",{className:"col col-start"},s.a.createElement("div",{className:"icon",onClick:this.prevMonth},"chevron_left")),s.a.createElement("div",{className:"col col-center"},s.a.createElement("span",null,J.a.format(this.state.currentMonth,"MMMM YYYY"))),s.a.createElement("div",{className:"col col-end",onClick:this.nextMonth},s.a.createElement("div",{className:"icon"},"chevron_right")))}},{key:"renderDays",value:function(){for(var e=[],t=J.a.startOfWeek(this.state.currentMonth),a=0;a<7;a++)e.push(s.a.createElement("div",{className:"col col-center",key:a},J.a.format(J.a.addDays(t,a),"dddd")));return s.a.createElement("div",{className:"days row"},e)}},{key:"renderCells",value:function(){for(var e=this,t=this.state,a=t.currentMonth,n=t.selectedDate,r=J.a.startOfMonth(a),l=J.a.endOfMonth(r),o=J.a.startOfWeek(r),c=J.a.endOfWeek(l),i=[],d=[],u=o,h="",m=this.state.saveddates?this.state.saveddates.length:0,p=this.state.saveddates;u<=c;){for(var b=function(t){h=J.a.format(u,"D");var a=u;for(v=[],g=0;g<m;g++)k=J.a.format(p[g].startdate,"MM/DD/YYYY"),E=J.a.format(p[g].enddate,"MM/DD/YYYY"),(y=J.a.format(a,"MM/DD/YYYY"))>=k&&y<=E&&v.push(s.a.createElement("div",{key:p[g].titlenum,id:p[g].titlenum,onClick:e.togglemodale,className:"calsched"}));d.push(s.a.createElement("div",{className:"style-13 col cell ".concat(J.a.isSameMonth(u,r)?J.a.isSameDay(u,n)?"selected":"":"disabled"),key:u,onClick:function(){return e.onDateClick(J.a.parse(a))}},s.a.createElement("span",{className:"number"},h),v)),u=J.a.addDays(u,1)},f=0;f<7;f++){var v,g,k,E,y;b()}i.push(s.a.createElement("div",{className:"row",key:u},d)),d=[]}return s.a.createElement("div",{className:"body"},i)}},{key:"render",value:function(){var e=this,t="startdate",a="enddate",n="Make sure you select both dates",r="Make sure start date is before the end date",l="Date range conflict with existing dates";return s.a.createElement("div",{className:"calendar"},this.renderHeader(),this.renderDays(),this.renderCells(),s.a.createElement(q.k,{isOpen:this.state.editmodal,toggle:this.togglemodale},s.a.createElement(q.n,{toggle:this.togglemodale},s.a.createElement("div",null,"Edit this current schedule")),s.a.createElement(q.l,null,s.a.createElement("div",null,s.a.createElement("div",{className:"editlabel"},"Start:"),this.rtogsd(),s.a.createElement("div",{className:"editlabel"},"End:"),this.rtoged()),s.a.createElement("span",{className:"editlabel2"},"Start Date:"),s.a.createElement($.a,{className:"dtpickstart",onChange:function(a){e.schedinput(a,t)},value:this.state.startdate}),s.a.createElement("br",null),s.a.createElement("span",{className:"editlabel2"},"End      Date:"),s.a.createElement($.a,{className:"dtpickend",onChange:function(t){e.schedinput(t,a)},value:this.state.enddate}),0==this.state.warning1?null:s.a.createElement("div",null,n),0==this.state.warning2?null:s.a.createElement("div",null,r),0==this.state.warning3?null:s.a.createElement("div",null,l)),s.a.createElement(q.m,null,s.a.createElement(q.a,{color:"primary",onClick:this.editSched},"Save changes"),s.a.createElement(q.a,{color:"green",onClick:this.deleteSched},"Delete"),s.a.createElement(q.a,{color:"secondary",onClick:this.togglemodale},"Close"))),s.a.createElement(q.k,{isOpen:this.state.createmodal,toggle:this.togglemodalc},s.a.createElement(q.n,{toggle:this.togglemodalc},"Set this book's reading schedule"),s.a.createElement(q.l,null,"Start Date:",s.a.createElement($.a,{onChange:function(a){e.schedinput(a,t)},value:0!=this.state.calchange?this.state.startdate:this.state.selectedDate}),s.a.createElement("br",null),"End Date:",s.a.createElement($.a,{onChange:function(t){e.schedinput(t,a)},value:0!=this.state.calchange?this.state.enddate:this.state.selectedDate}),0==this.state.warning1?null:s.a.createElement("div",null,n),0==this.state.warning2?null:s.a.createElement("div",null,r),0==this.state.warning3?null:s.a.createElement("div",null,l)),s.a.createElement(q.m,null,s.a.createElement(q.a,{color:"primary",onClick:this.addSched},"Save changes"),s.a.createElement(q.a,{color:"secondary",onClick:this.togglemodalc},"Close")," ")))}}]),t}(r.Component),Q=a(122),X=a.n(Q),Z=a(28),ee=a.n(Z),te=ee.a.Editor,ae=(ee.a.EditorState,ee.a.RichUtils),ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={editorState:a.props.initialEditor},a.focus=function(){return a.refs.editor.focus()},a.onChange=function(e){a.props.saveEditorState(e),a.setState({editorState:e})},a.handleKeyCommand=function(e){return a._handleKeyCommand(e)},a.toggleBlockType=function(e){return a._toggleBlockType(e)},a.toggleInlineStyle=function(e){return a._toggleInlineStyle(e)},a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"_handleKeyCommand",value:function(e){var t=this.state.editorState,a=ae.handleKeyCommand(t,e);return!!a&&(this.onChange(a),!0)}},{key:"_onTab",value:function(e){this.onChange(ae.onTab(e,this.state.editorState,4))}},{key:"_toggleBlockType",value:function(e){this.onChange(ae.toggleBlockType(this.state.editorState,e))}},{key:"_toggleInlineStyle",value:function(e){this.onChange(ae.toggleInlineStyle(this.state.editorState,e))}},{key:"render",value:function(){var e=this.state.editorState,t="RichEditor-editor",a=e.getCurrentContent();return a.hasText()||"unstyled"!==a.getBlockMap().first().getType()&&(t+=" RichEditor-hidePlaceholder"),s.a.createElement("div",{className:"RichEditor-root"},s.a.createElement(ce,{editorState:e,onToggle:this.toggleBlockType}),s.a.createElement(de,{editorState:e,onToggle:this.toggleInlineStyle}),s.a.createElement("div",{className:t,onClick:this.focus},s.a.createElement(te,{blockStyleFn:se,customStyleMap:re,editorState:e,handleKeyCommand:this.handleKeyCommand,onChange:this.onChange,onTab:this.onTab,placeholder:"Tell a story...",ref:"editor",spellCheck:!0})))}}]),t}(s.a.Component),re={CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:2}};function se(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";default:return null}}var le=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).onToggle=function(t){t.preventDefault(),e.props.onToggle(e.props.style)},e}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e="RichEditor-styleButton";return this.props.active&&(e+=" RichEditor-activeButton"),s.a.createElement("span",{className:e,onMouseDown:this.onToggle},this.props.label)}}]),t}(s.a.Component),oe=[{label:"H1",style:"header-one"},{label:"H2",style:"header-two"},{label:"H3",style:"header-three"},{label:"H4",style:"header-four"},{label:"H5",style:"header-five"},{label:"H6",style:"header-six"},{label:"Blockquote",style:"blockquote"},{label:"UL",style:"unordered-list-item"},{label:"OL",style:"ordered-list-item"}],ce=function(e){var t=e.editorState,a=t.getSelection(),n=t.getCurrentContent().getBlockForKey(a.getStartKey()).getType();return s.a.createElement("div",{className:"RichEditor-controls"},oe.map(function(t){return s.a.createElement(le,{key:t.label,active:t.style===n,label:t.label,onToggle:e.onToggle,style:t.style})}))},ie=[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"}],de=function(e){var t=e.editorState.getCurrentInlineStyle();return s.a.createElement("div",{className:"RichEditor-controls"},ie.map(function(a){return s.a.createElement(le,{key:a.label,active:t.has(a.style),label:a.label,onToggle:e.onToggle,style:a.style})}))},ue=ne,he=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).saveEditorState=function(e){a.setState({editorState:e})},a.saveEditorToDB=Object(g.a)(v.a.mark(function e(){var t,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.editorState.getCurrentContent(),n=JSON.stringify(Object(Z.convertToRaw)(t)),e.next=4,E.a.post("/api/saveChapEditor",{user:a.props.user,bookid:a.props.bookid,chapnum:a.state.chapnum,editor:n});case 4:r=e.sent,r.data.book.chapters,a.setState({chapters:r.data.book.chapters});case 7:case"end":return e.stop()}},e)})),a.addChapter=function(){var e=Object(g.a)(v.a.mark(function e(t){var n,r,s,l,o,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state.title,r=new RegExp(/^\d*$/),s=r.test(a.state.chapnum)&&parseInt(a.state.chapnum)>=1&&parseInt(a.state.chapnum)<=170,l=!0,a.state.chapters)for(o=0;o<a.state.chapters.length;o++)a.state.chapnum==a.state.chapters[o].chapnum&&(l=!1);if(!s||0==l){e.next=12;break}return a.setState({warning1:!1,warning2:!1}),e.next=10,E.a.post("/api/postachapter",{user:a.props.user,bookid:a.props.bookid,chapnum:a.state.chapnum,title:n});case 10:c=e.sent,a.setState({chapters:c.data.book.chapters});case 12:0==s&&a.setState({warning1:!0}),0==l&&a.setState({warning2:!0,warning1:!1});case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.mStartOnChange=function(e){"chapnum"==e.currentTarget.id&&a.setState({chapnum:e.currentTarget.value}),"title"==e.currentTarget.id&&a.setState({title:e.currentTarget.value})},a.setChapterStart=function(){a.setState({addchapter:!a.state.addchapter,warning1:!1,warning2:!1})},a.addBookNote=function(e){var t=e.target.parentNode.id,n=t-1,r=a.state.chapters[n].predictions;if(r){var s=Z.EditorState.createWithContent(Object(Z.convertFromRaw)(JSON.parse(r)));a.setState({initialEditor:s})}else a.setState({initialEditor:Z.EditorState.createEmpty()});a.setState({noteid:t,notemodal:!a.state.notemodal})},a.renderEditCards=function(){var e,t=[],n={color:"black"};e=a.state.chapters.sort(function(e,t){return e.chapnum-t.chapnum});for(var r=0;r<e.length;r++){var l=a.state.chapters[r].chapnum;"selected"==a.state.cardselects[l]?t.push(s.a.createElement("div",{key:a.state.chapters[r].chapnum,id:a.state.chapters[r].chapnum,onClick:a.editCardClick,className:"bkcardeditselect"},s.a.createElement("div",{className:"cardTitle"},"Chapter ",a.state.chapters[r].chapnum),s.a.createElement("hr",null),s.a.createElement("input",{id:a.state.chapters[r].chapnum,type:"text",placeholder:a.state.chapters[r].title,style:n,className:"cardTitle2",value:a.state.cardinputs[a.state.chapters[r].chapnum],onChange:a.cardonChange}),s.a.createElement("button",{onClick:function(e){a.addBookNote(e)}},"Add Book Notes"))):t.push(s.a.createElement("div",{key:a.state.chapters[r].chapnum,id:a.state.chapters[r].chapnum,onClick:a.editCardClick,className:"bkcardedit"},s.a.createElement("div",{className:"cardTitle"},"Chapter ",a.state.chapters[r].chapnum),s.a.createElement("hr",null),s.a.createElement("div",{className:"cardTitle2"},a.state.chapters[r].title),">"))}return t},a.cardonChange=function(e){var t=e.target.id,n=e.target.value;a.setState(function(e){return{cardinputs:Object(B.a)({},e.cardinputs,Object(c.a)({},t,n))}})},a.editCardClick=function(e){if("INPUT"!=e.target.nodeName){var t=e.currentTarget.id;"selected"==a.state.cardselects[t]?a.setState(function(e){return{chapnum:t,cardselects:Object(B.a)({},e.cardselects,Object(c.a)({},t,"notselected"))}}):(a.state[t],a.setState(function(e){return{chapnum:t,cardselects:Object(B.a)({},e.cardselects,Object(c.a)({},t,"selected"))}}))}},a.turnjsSwitch=function(){var e=Object(g.a)(v.a.mark(function e(t){var n,r,l,o,c,i,d,u,h,m,p,b,f,g,k,y,j,O,w,S,C,N,x,T,D,I,_,M,R,q,B,L,Y,A,z,U,G,K,F,H,W,J,P,$,V,Q,X,ee,te,ae,ne,re,se;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.id,r=n-1,l=a.state.chapters[r].predictions,o=a.state.chapters[r].title,e.next=6,E.a.post("/api/profileonly",{goodreadId:a.props.user.goodreadId});case 6:if(c=e.sent,i=c.data.profileinfo.GoodreadsResponse.user,console.log(i),d=l?Z.EditorState.createWithContent(Object(Z.convertFromRaw)(JSON.parse(l))):Z.EditorState.createEmpty(),u=d.getCurrentContent().getPlainText(),"Empty"==(h=l?JSON.parse(l):"Empty")){e.next=87;break}for(m=[],[],p={"header-one":"h1","unordered-list-item":"ul","ordered-list-item":"ol",BOLD:{fontWeight:"bold"},UNDERLINE:{textDecoration:"underline"},ITALIC:{fontStyle:"italic"}},b=0,f=0;f<u.length;f++){for(g={display:"inline"},b=0,u[f].match(/\r\n|\r|\n/g)&&(g={}),k=0;k<h.blocks.length;k++){for(y=0;y<h.blocks[k].inlineStyleRanges.length;y++)j=h.blocks[k].inlineStyleRanges[y].offset+b,O=h.blocks[k].inlineStyleRanges[y].length+j,w=h.blocks[k].inlineStyleRanges[y].style,f>=j&&f<=O&&Object.assign(g,p[w]);b+=h.blocks[k].text.length+1}m.push([u[f],g])}S=[],C=[],N=0,0,x=0,T=0,D=[],I=0;case 26:if(!(I<m.length)){e.next=83;break}if(!(m[I][0].match(/\r\n|\r|\n/g)||!m[I+1]||D.length>0)){e.next=79;break}D.length>0&&(D[1]&&D.pop(),S=D,I-=1,D=[]),C[T]||(C[T]=[]),_=h.blocks[N]?h.blocks[N].type:null,e.t0=_,e.next="header-one"===e.t0?34:"header-two"===e.t0?36:"header-three"===e.t0?38:"header-four"===e.t0?40:"header-five"===e.t0?42:"header-six"===e.t0?44:"unordered-list-item"===e.t0?46:"ordered-list-item"===e.t0?52:"blockquote"===e.t0?58:"unstyled"===e.t0?64:70;break;case 34:return x+3>=17?(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("h1",null,S))),T++,N++,x=0):(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("h1",null,S))),N++,x+=3),e.abrupt("break",76);case 36:return x+2.5>=17?(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("h2",null,S))),T++,N++,x=0):(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("h2",null,S))),N++,x+=2.5),e.abrupt("break",76);case 38:return x+2>=17?(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("h3",null,S))),T++,N++,x=0):(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("h3",null,S))),N++,x+=2),e.abrupt("break",76);case 40:return x+1.5>=17?(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("h4",null,S))),T++,N++,x=0):(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("h4",null,S))),N++,x+=1.5),e.abrupt("break",76);case 42:return x+1.25>=17?(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("h5",null,S))),T++,N++,x=0):(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("h5",null,S))),N++,x+=1.25),e.abrupt("break",76);case 44:return x+1>=17?(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("h6",null,S))),T++,N++,x=0):(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("h6",null,S))),N++,x+=1),e.abrupt("break",76);case 46:return M=S.length,36,(q=x+(R=M/36))>=17?(M<=(B=36*(q-17))?D=D.concat(S):(L=S.splice(S.length-B,B),D.length=0,D=D.concat(L),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("ul",{className:"pageUL"},s.a.createElement("li",null,S))))),T++,x=0):(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("ul",{className:"pageUL"},s.a.createElement("li",null,S)))),N++,x+=Math.ceil(R)),e.abrupt("break",76);case 52:return Y=S.length,36,(z=x+(A=Y/36))>=17?(Y<=(U=36*(z-17))?D=D.concat(S):(G=S.splice(S.length-U,U),D.length=0,D=D.concat(G),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("ol",{className:"pageOL"},s.a.createElement("li",null,S))))),T++,x=0):(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("ol",{className:"pageOL"},s.a.createElement("li",null,S)))),N++,x+=Math.ceil(A)),e.abrupt("break",76);case 58:return K=S.length,36,(H=x+(F=K/36))>=17?(K<=(W=36*(H-17))?D=D.concat(S):(J=S.splice(S.length-W,W),D.length=0,D=D.concat(J),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("blockquote",{className:"grapefruit"},S)))),T++,x=0):(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},s.a.createElement("blockquote",{className:"grapefruit"},S))),N++,x+=Math.ceil(F)),e.abrupt("break",76);case 64:return P=S.length,36,(V=x+($=P/36))>=17?(P<=(Q=36*(V-17))?D=D.concat(S):(X=S.splice(S.length-Q,Q),D.length=0,D=D.concat(X),C[T].push(s.a.createElement("div",{key:I},S))),T++,x=0):(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},S)),N++,x+=Math.ceil($)),e.abrupt("break",76);case 70:return ee=S.length,36,(ae=x+(te=ee/36))>=17?(ee<=(ne=36*(ae-17))?D=D.concat(S):(re=S.splice(S.length-ne,ne),D.length=0,D=D.concat(re),C[T].push(s.a.createElement("div",{key:I},S))),T++,x=0):(S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0])),C[T].push(s.a.createElement("div",{key:I},S)),N++,x+=Math.ceil(te)),e.abrupt("break",76);case 76:S=[],e.next=80;break;case 79:S.push(s.a.createElement("div",{key:I,style:m[I][1]},m[I][0]));case 80:I++,e.next=26;break;case 83:console.log(i),a.setState({turnjstext:C,coverinfo:{chapnum:n,title:o},profile:i},function(){a.setState({turnjs:"on"})}),e.next=89;break;case 87:se=["No notes =("],a.setState({turnjstext:se,coverinfo:{chapnum:r,title:o},profile:i},function(){a.setState({turnjs:"on"})});case 89:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.renderCards=function(){var e,t=[];e=a.state.chapters.sort(function(e,t){return e.chapnum-t.chapnum});for(var n=0;n<e.length;n++)t.push(s.a.createElement("div",{key:a.state.chapters[n].chapnum,id:a.state.chapters[n].chapnum,onClick:a.turnjsSwitch,className:"bkcard"},s.a.createElement("div",{className:"cardTitle"},"Chapter   ",a.state.chapters[n].chapnum),s.a.createElement("hr",null),s.a.createElement("div",{className:"cardTitle2"},a.state.chapters[n].title)));return t},a.seteditRender=function(){a.setState({edit:!a.state.edit,cardinputs:{},cardselects:{}})},a.trashButton=function(){return s.a.createElement("div",{className:"icon-trash",onClick:a.delChapters},s.a.createElement("div",{className:"trash-lid"}),s.a.createElement("div",{className:"trash-container"}),s.a.createElement("div",{className:"trash-line-1"}),s.a.createElement("div",{className:"trash-line-2"}),s.a.createElement("div",{className:"trash-line-3"}))},a.saveedits=Object(g.a)(v.a.mark(function e(){var t,n,r,s,l,o,c,i,d,u,h,m;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(l in t=[],n=a.state.chapters.slice(),r=Object.assign({},a.state.cardinputs),s=Object.assign({},a.state.cardselects),r)for(o in s)"selected"==s[o]&&l==o&&(c={chapnum:l,title:r[l]},t.push(c));for(i=0;i<n.length;i++)for(d=0;d<t.length;d++)n[i].chapnum==t[d].chapnum&&(n[i].title=t[d].title);return u=a.props.user,h=a.props.bookid,e.next=10,E.a.post("/api/updatechapters",{user:u,bookid:h,chapters:n});case 10:m=e.sent,a.setState({chapters:m.data.chapters,savemsg:!0},function(){setTimeout(function(){a.setState({savemsg:!1})},2300)});case 12:case"end":return e.stop()}},e)})),a.delChapters=Object(g.a)(v.a.mark(function e(){var t,n,r,s,l;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.assign({},a.state.cardselects),n=Object.assign({},a.state.cardinputs),e.next=4,E.a.post("/api/deletechapters",{user:a.props.user,bookid:a.props.bookid,cardselects:t});case 4:for(l in r=e.sent,s=r.data.book.chapters,t)"selected"==t[l]&&delete n[l];t={},a.setState({chapters:s,cardselects:t,cardinputs:n,deletemsg:!0},function(){setTimeout(function(){a.setState({deletemsg:!1})},2300)});case 9:case"end":return e.stop()}},e)})),a.firstLoad=Object(g.a)(v.a.mark(function e(){var t,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/booksched",{user:a.props.user,bookid:a.props.bookid,action:"get"});case 2:(t=e.sent).data.dates&&(n=t.data.dates.chapters,a.setState({firstload:!1,chapters:n}));case 4:case"end":return e.stop()}},e)})),a.state={addchapter:!1,chapnum:"",title:"",warning1:!1,warning2:!1,firstload:!0,chapters:null,edit:!1,cardinputs:{},cardselects:{},savemsg:!1,deletemsg:!1,turnjs:!1,noteid:null,notemodal:!1,predictions:"",quotes:"",lessons:"",general:"",editorState:null,initialEditor:Z.EditorState.createEmpty(),turnjstext:null,coverinfo:null,profile:null},a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=s.a.createElement("div",{className:"bknotewarningred"},"Number must be between 1 and 170"),a=s.a.createElement("div",{className:"bknotewarningred"},"Chapter number already exists"),n={textAlign:"center",fontSize:"25px"};return this.props.user&&this.state.firstload&&this.firstLoad(),s.a.createElement("div",{className:"cero"},"on"==this.state.turnjs?s.a.createElement(I.b,{to:"/booknotes",className:"editFlexBack"},"Go Back"):null,"on"==this.state.turnjs?s.a.createElement(N,{turnjstext:this.state.turnjstext,profile:this.state.profile,coverinfo:this.state.coverinfo}):s.a.createElement("div",{className:"cardscontainer"},s.a.createElement("div",{className:"editcontainer"},s.a.createElement("a",{href:"/mybooks",className:"editFlexBack"},"Go Back"),s.a.createElement("div",{className:"editflex"},s.a.createElement("div",{className:"editFlexBack",onClick:this.seteditRender},"Edit"),0!=this.state.edit?s.a.createElement("div",{onClick:this.saveedits,className:"editFlexBack"},"Save"):null,0!=this.state.edit?this.trashButton():null)),s.a.createElement("div",{className:"bkcards"},s.a.createElement(q.k,{isOpen:this.state.savemsg,size:"sm"},s.a.createElement(q.l,{style:n},s.a.createElement("img",{height:"50",src:X.a}),"Save Success!")),s.a.createElement(q.k,{isOpen:this.state.deletemsg,size:"sm"},s.a.createElement(q.l,{style:n},s.a.createElement("img",{height:"50",src:X.a}),"Delete Success!")),s.a.createElement(q.k,{isOpen:this.state.notemodal,className:"editNoteModal"},s.a.createElement(q.n,{toggle:function(){return e.setState({notemodal:!e.state.notemodal})}},"Edit Book Notes"),s.a.createElement(q.l,null,s.a.createElement("div",null,"Predictions:"),s.a.createElement(ue,{initialEditor:this.state.initialEditor,saveEditorState:this.saveEditorState}),s.a.createElement("button",{onClick:this.saveEditorToDB},"SAVE")),s.a.createElement(q.m,null)),s.a.createElement(q.k,{isOpen:this.state.addchapter,size:"sm"},s.a.createElement(q.n,{toggle:function(){return e.setChapterStart()}},"Add a new chapter"),s.a.createElement("form",null,s.a.createElement(q.l,null,s.a.createElement(q.g,{id:"chapnum",value:this.state.chapnum,onChange:function(t){e.mStartOnChange(t)},className:"modalstartinput",label:"Chapter Number",type:"number",required:!0,min:"1",max:"170"}),this.state.warning1?t:null,this.state.warning2?a:null,s.a.createElement(q.g,{id:"title",value:this.state.title,onChange:function(t){e.mStartOnChange(t)},label:"Chapter Title",maxLength:"50"})),s.a.createElement(q.m,null,s.a.createElement(q.a,{size:"sm",type:"submit",color:"primary",onClick:function(t){e.addChapter(t)},required:!0},"Save changes"),s.a.createElement(q.a,{size:"sm",color:"secondary",onClick:function(){return e.setChapterStart()},required:!0},"Close")," "))),0!=this.state.edit&&this.state.chapters?this.renderEditCards():null,this.state.chapters&&0==this.state.edit?this.renderCards():null,this.state.edit?null:s.a.createElement("div",{className:"addCenter"},s.a.createElement("div",{className:"addCenter",onClick:this.setChapterStart},s.a.createElement("div",{className:"addChapter"}))))))}}]),t}(r.Component);var me=Object(S.b)(function(e){return{user:e.auth,bookid:e.bknid}})(he),pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={bookcounter:1,shelf:"All",tabledata:"",grid2:"grid2",booknote:!1},a.mybookdata="",a.bookpreviewId="",a.booksched=null,a.mybooksload=a.mybooksload.bind(Object(R.a)(Object(R.a)(a))),a.leftnav=a.leftnav.bind(Object(R.a)(Object(R.a)(a))),a.tablerender=a.tablerender.bind(Object(R.a)(Object(R.a)(a))),a.tableload=a.tableload.bind(Object(R.a)(Object(R.a)(a))),a.previewState=a.previewState.bind(Object(R.a)(Object(R.a)(a))),a.previewRender=a.previewRender.bind(Object(R.a)(Object(R.a)(a))),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"mybooksload",value:function(){var e=Object(g.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.abrupt("return",s.a.createElement("div",null,"nodata"));case 4:return e.next=6,E.a.post("/api/mybooksload",{goodreadId:t.goodreadId});case 6:a=e.sent,n=a.data,JSON.stringify(n)!=JSON.stringify(this.mybookdata)&&(this.mybookdata=n,this.setState(function(e){return{bookcounter:e.bookcounter+1}}));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"leftnav",value:function(){for(var e=this.mybookdata.shelflist[0].user_shelf,t=[],a=[],n=0;n<e.length;n++)"true"==e[n].exclusive_flag[0]._?t.push(s.a.createElement("li",{key:n,onClick:this.tableload},e[n].name[0])):a.push(s.a.createElement("li",{key:n,onClick:this.tableload},e[n].name[0]));return s.a.createElement("ul",null,s.a.createElement("div",{className:"goodReadsLogo"}),s.a.createElement("hr",{className:"goodReadsLogoHR"}),s.a.createElement("h1",{className:"shelvesh1"},"Shelves"),s.a.createElement("li",{onClick:this.tableload},"All"),t,a)}},{key:"tableload",value:function(){var e=Object(g.a)(v.a.mark(function e(t){var a,n=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a="All"==t.currentTarget.textContent?"":t.currentTarget.textContent,this.setState({shelf:a,grid2:"grid2"},Object(g.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/selectshelf",{shelfname:n.state.shelf,goodreadId:n.props.auth.goodreadId});case 2:t=e.sent,a=t.data,n.setState({tabledata:a});case 5:case"end":return e.stop()}},e)})));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"tablerender",value:function(){var e,t,a=this;t=null==(e=""!=this.state.tabledata?this.state.tabledata.books:this.mybookdata.books)||void 0==e||0===Object.keys(e).length?[{cover:"",title:"",author:"",avgrating:"",year:""}]:e.map(function(e){var t=e.book[0].title[0],n=e.book[0].authors[0].author[0].name[0],r=e.book[0].average_rating[0],l=e.book[0].published[0],o=e.book[0].image_url[0],c=(e.book[0].num_pages[0],e.book[0].description[0],e.book[0].id[0]._);return{cover:s.a.createElement("div",{id:c,className:"pointer",onClick:a.previewState},s.a.createElement("img",{src:o})),title:t,author:n,avgrating:r,year:l}});return s.a.createElement(q.h,{btn:!0,className:"mdbtablemybooks"},s.a.createElement(q.j,{columns:[{label:"cover",field:"cover",sort:"asc"},{label:"title",field:"title",sort:"asc"},{label:"author",field:"author",sort:"asc"},{label:"avg. rating",field:"avg. rating",sort:"asc"},{label:"year",field:"year",sort:"asc"}]}),s.a.createElement(q.i,{rows:t}))}},{key:"previewState",value:function(){var e=Object(g.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.bookpreviewId=t.currentTarget.id,this.props.calendarbookid(this.bookpreviewId),e.next=4,E.a.post("/api/booksched",{action:"get",user:this.props.auth,bookid:this.bookpreviewId});case 4:a=e.sent,this.booksched=a.data.dates,"grid2"==this.state.grid2?this.setState({grid2:"grid3"}):this.setState({grid2:"grid2"});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"previewRender",value:function(){var e,t,a,n,r=this,l=this.bookpreviewId;if(e=""!=this.state.tabledata?this.state.tabledata.books:this.mybookdata.books)for(var o=0;o<e.length;o++)e[o].book[0].id[0]._==l&&(e[o].book[0],t=e[o].book[0].description[0],e[o].book[0].num_pages[0],a=e[o].book[0].image_url[0],n=e[o].book[0].title[0]);else null,t=null,null,a=null,n=null;return s.a.createElement("div",{className:"previewnote style-13"},s.a.createElement("div",{className:"bookprevinfo"},s.a.createElement("img",{src:a}),s.a.createElement("div",{className:"bkprevdet"},s.a.createElement("h1",{className:"bkprevtitle"},n),s.a.createElement("h5",null,"Description:")," ",t)),s.a.createElement("div",{className:"noteprevinfo"},s.a.createElement("a",{className:"toBkNoteLink",onClick:function(){r.setState({booknote:!0})}},"Go to book notes")),s.a.createElement("div",{className:"calendarprevinfo"},s.a.createElement(V,{bookid:this.bookpreviewId,booksched:this.booksched,user:this.props.auth})))}},{key:"render",value:function(){return this.mybooksload(this.props.auth),s.a.createElement("div",{className:0!=this.state.booknote?"bknoteparent":"grid2"!=this.state.grid2?"mybookscontainer style-13":"mybookscontainer2 style-13"},1!=this.state.bookcounter?null:s.a.createElement("div",{className:"loader"}),0!=this.state.booknote?s.a.createElement(me,null):null,0!=this.state.booknote?null:s.a.createElement("nav",{className:"booklistsidebar style-13"},1!=this.state.bookcounter?this.leftnav():null),0!=this.state.booknote?null:s.a.createElement("div",{className:"mybookstable style-13"},1!=this.state.bookcounter?this.tablerender():null),"grid2"!=this.state.grid2&&1!=this.state.booknote?this.previewRender():null)}}]),t}(r.Component);var be=Object(S.b)(function(e){return{auth:e.auth}},n)(pe),fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"renderContent",value:function(){switch(this.props.auth){case null:return;case!1:return s.a.createElement("a",{href:"/auth/goodreads"},s.a.createElement("img",{src:"https://s.gr-assets.com/assets/badge/goodreads-login-button-7bd184d3077cf3580f68aa8a00de39ce.png",alt:"nother"}));default:return s.a.createElement("div",null,s.a.createElement("ul",{className:"headerul"},s.a.createElement(I.b,{to:"/mybooks"},"My Books"),s.a.createElement("a",{href:"/profile"},"Profile"),s.a.createElement("a",{href:"/auth/logout"},"LogOut")))}}},{key:"render",value:function(){return s.a.createElement("div",{className:"header"},s.a.createElement("a",{href:"/"},s.a.createElement("div",{className:"logobg"},"Let's Read!")),s.a.createElement("div",null,this.renderContent()))}}]),t}(r.Component);var ve=Object(S.b)(function(e){return{auth:e.auth}},n)(fe),ge=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUser()}},{key:"render",value:function(){var e=this;return s.a.createElement(I.a,null,s.a.createElement("div",{className:"rootdk"},s.a.createElement(ve,null),s.a.createElement("div",{className:"container"},s.a.createElement(_.c,null,s.a.createElement(_.a,{exact:!0,path:"/",component:K}),s.a.createElement(_.a,{exact:!0,path:"/mybooks",component:function(){return e.props.thisuser?s.a.createElement(be,null):s.a.createElement(K,null)}}),s.a.createElement(_.a,{exact:!0,path:"/booknotes",component:function(){return e.props.thisuser?s.a.createElement(me,null):s.a.createElement(K,null)}}),"} />",s.a.createElement(_.a,{exact:!0,path:"/profile",render:function(){return e.props.thisuser?s.a.createElement(H,null):s.a.createElement(K,null)}})),s.a.createElement(M,null))))}}]),t}(r.Component);var ke=Object(S.b)(function(e){return{thisuser:e.auth}},n)(ge),Ee=Object(x.d)(D,{},Object(x.a)(T.a)),ye=document.getElementById("root");o.a.render(s.a.createElement(S.a,{store:Ee},s.a.createElement(ke,null)),ye)}},[[212,2,1]]]);
//# sourceMappingURL=main.2698b9cf.chunk.js.map